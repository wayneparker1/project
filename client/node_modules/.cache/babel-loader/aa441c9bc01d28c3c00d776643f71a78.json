{"ast":null,"code":"var _jsxFileName = \"/Users/esther/client/src/Components/Basket.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport ProductDetails from './ProductDetails';\n\nconst Basket = ({\n  basket,\n  setBasket,\n  user,\n  basketo,\n  products,\n  refresh,\n  setRefresh\n}) => {\n  var basketop = [];\n  var listbaskets = [];\n\n  if (basketo != undefined) {\n    basketo.map(prod => {\n      if (prod != undefined) {\n        products.map(p => {\n          if (p.name == prod.name) {\n            prod = p;\n            basketop.push(prod);\n          }\n        });\n      }\n    });\n  }\n\n  async function updateBasket(items) {\n    const response = await axios.put(\"http://localhost:8080/basket/\".concat(user.user.id), {\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      products: [...items]\n    });\n    setRefresh(!refresh);\n    return response;\n  }\n\n  const removeProductFromBasket = name => {\n    listbaskets = [];\n    basketo.map(prod => {\n      if (prod.name != name) {\n        listbaskets.push(prod);\n      }\n    });\n    updateBasket(listbaskets);\n  };\n\n  const renderContent = () => {\n    return basketop.map(product => {\n      const id = product.id,\n            name = product.name,\n            price = product.price;\n      return React.createElement(ProductDetails, {\n        key: id,\n        name: name,\n        price: price,\n        button: \"remove\",\n        removeProductFromBasket: removeProductFromBasket,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      });\n    });\n  }; //todo make sure user can remove items from basket\n\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \"Basket Page\"), React.createElement(\"a\", {\n    style: {\n      float: \"right\"\n    },\n    href: \"/commerce\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, \"Back to shopping\"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, renderContent()), React.createElement(\"button\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, \"Checkout\"));\n};\n\nexport default Basket;","map":{"version":3,"sources":["/Users/esther/client/src/Components/Basket.js"],"names":["React","useEffect","useState","axios","ProductDetails","Basket","basket","setBasket","user","basketo","products","refresh","setRefresh","basketop","listbaskets","undefined","map","prod","p","name","push","updateBasket","items","response","put","id","headers","removeProductFromBasket","renderContent","product","price","float"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,cAAP,MAA2B,kBAA3B;;AAEA,MAAMC,MAAM,GAAG,CAAC;AAACC,EAAAA,MAAD;AAASC,EAAAA,SAAT;AAAoBC,EAAAA,IAApB;AAA0BC,EAAAA,OAA1B;AAAmCC,EAAAA,QAAnC;AAA6CC,EAAAA,OAA7C;AAAsDC,EAAAA;AAAtD,CAAD,KAAuE;AAElF,MAAIC,QAAQ,GAAG,EAAf;AACA,MAAIC,WAAW,GAAG,EAAlB;;AACA,MAAIL,OAAO,IAAIM,SAAf,EAA0B;AACtBN,IAAAA,OAAO,CAACO,GAAR,CAAYC,IAAI,IAAI;AAChB,UAAIA,IAAI,IAAIF,SAAZ,EAAuB;AACnBL,QAAAA,QAAQ,CAACM,GAAT,CAAaE,CAAC,IAAI;AACd,cAAIA,CAAC,CAACC,IAAF,IAAUF,IAAI,CAACE,IAAnB,EAAyB;AACrBF,YAAAA,IAAI,GAAGC,CAAP;AACAL,YAAAA,QAAQ,CAACO,IAAT,CAAcH,IAAd;AACH;AACJ,SALD;AAMH;AACJ,KATD;AAUH;;AAED,iBAAeI,YAAf,CAA4BC,KAA5B,EAAmC;AAC/B,UAAMC,QAAQ,GAAG,MAAMpB,KAAK,CAACqB,GAAN,wCAA0ChB,IAAI,CAACA,IAAL,CAAUiB,EAApD,GACvB;AACIC,MAAAA,OAAO,EAAE;AACL,wBAAgB;AADX,OADb;AAIIhB,MAAAA,QAAQ,EAAE,CACN,GAAGY,KADG;AAJd,KADuB,CAAvB;AAUAV,IAAAA,UAAU,CAAC,CAACD,OAAF,CAAV;AACA,WAAOY,QAAP;AACH;;AAED,QAAMI,uBAAuB,GAAIR,IAAD,IAAU;AACtCL,IAAAA,WAAW,GAAG,EAAd;AACAL,IAAAA,OAAO,CAACO,GAAR,CAAYC,IAAI,IAAI;AAChB,UAAIA,IAAI,CAACE,IAAL,IAAaA,IAAjB,EAAuB;AACnBL,QAAAA,WAAW,CAACM,IAAZ,CAAiBH,IAAjB;AACH;AACJ,KAJD;AAKAI,IAAAA,YAAY,CAACP,WAAD,CAAZ;AACH,GARD;;AASA,QAAMc,aAAa,GAAG,MAAM;AAEvB,WAAOf,QAAQ,CAACG,GAAT,CAAca,OAAO,IAAI;AAAA,YACtBJ,EADsB,GACHI,OADG,CACtBJ,EADsB;AAAA,YAClBN,IADkB,GACHU,OADG,CAClBV,IADkB;AAAA,YACZW,KADY,GACHD,OADG,CACZC,KADY;AAE9B,aACS,oBAAC,cAAD;AACI,QAAA,GAAG,EAAIL,EADX;AAEI,QAAA,IAAI,EAAIN,IAFZ;AAGI,QAAA,KAAK,EAAIW,KAHb;AAII,QAAA,MAAM,EAAG,QAJb;AAKI,QAAA,uBAAuB,EAAIH,uBAL/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADT;AASF,KAXO,CAAP;AAYH,GAdF,CAzCkF,CAwDtF;;;AACI,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADJ,EAEI;AAAG,IAAA,KAAK,EAAI;AAACI,MAAAA,KAAK,EAAE;AAAR,KAAZ;AAA+B,IAAA,IAAI,EAAG,WAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFJ,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKH,aAAa,EADlB,CAHJ,EAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBANJ,CADJ;AAUH,CAnED;;AAqEA,eAAevB,MAAf","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport axios from 'axios';\nimport ProductDetails from './ProductDetails';\n\nconst Basket = ({basket, setBasket, user, basketo, products, refresh, setRefresh}) => {\n\n    var basketop = [];\n    var listbaskets = [];\n    if (basketo != undefined) {\n        basketo.map(prod => {\n            if (prod != undefined) {\n                products.map(p => {\n                    if (p.name == prod.name) {\n                        prod = p;\n                        basketop.push(prod);\n                    }\n                })\n            }\n        })\n    }\n\n    async function updateBasket(items) {\n        const response = await axios.put(`http://localhost:8080/basket/${user.user.id}`,\n        { \n            headers: {\n                'Content-Type': 'application/json',\n            },\n            products: [\n                ...items\n            ]\n        }\n        )\n        setRefresh(!refresh);\n        return response;\n    }\n    \n    const removeProductFromBasket = (name) => {\n        listbaskets = [];\n        basketo.map(prod => {\n            if (prod.name != name) {\n                listbaskets.push(prod);\n            }\n        });\n        updateBasket(listbaskets);\n    }\n    const renderContent = () => {\n        \n         return basketop.map( product => {\n           const { id, name, price} = product;\n           return (\n                    <ProductDetails \n                        key = {id} \n                        name = {name} \n                        price = {price} \n                        button = \"remove\"\n                        removeProductFromBasket = {removeProductFromBasket}\n                    />\n           );\n        }) \n     }\n//todo make sure user can remove items from basket\n    return (\n        <div>\n            <h1>Basket Page</h1>\n            <a style = {{float: \"right\" }} href = \"/commerce\">Back to shopping</a>\n            <div>\n                {renderContent()}\n            </div>\n            <button>Checkout</button>\n        </div>\n    );\n};\n\nexport default Basket;"]},"metadata":{},"sourceType":"module"}