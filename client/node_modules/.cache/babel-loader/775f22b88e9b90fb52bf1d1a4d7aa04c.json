{"ast":null,"code":"import _slicedToArray from \"/Users/esther/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/esther/client/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { BrowserRouter, Route } from 'react-router-dom';\nimport CommercePage from './Components/CommercePage';\nimport LoginPage from './Components/LoginPage';\nimport Basket from './Components/Basket';\nimport AdminPage from './Components/AdminPage';\nimport './App.css';\n\nfunction App() {\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        userName = _useState2[0],\n        setUserName = _useState2[1];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        password = _useState4[0],\n        setPassword = _useState4[1];\n\n  const _useState5 = useState(\"\"),\n        _useState6 = _slicedToArray(_useState5, 2),\n        name = _useState6[0],\n        setName = _useState6[1];\n\n  const _useState7 = useState(\"\"),\n        _useState8 = _slicedToArray(_useState7, 2),\n        price = _useState8[0],\n        setPrice = _useState8[1];\n\n  const _useState9 = useState(),\n        _useState10 = _slicedToArray(_useState9, 2),\n        user = _useState10[0],\n        setUser = _useState10[1];\n\n  const _useState11 = useState(),\n        _useState12 = _slicedToArray(_useState11, 2),\n        basket = _useState12[0],\n        setBasket = _useState12[1];\n\n  const _useState13 = useState(false),\n        _useState14 = _slicedToArray(_useState13, 2),\n        refresh = _useState14[0],\n        setRefresh = _useState14[1];\n\n  const _useState15 = useState([]),\n        _useState16 = _slicedToArray(_useState15, 2),\n        products = _useState16[0],\n        setProducts = _useState16[1];\n\n  if (user != undefined) {\n    if (user.user.basket.products.length === 0) {\n      var productNames = [];\n    } else {\n      var basketzz = user.user.basket.products[0].baskets[0].products.slice(1).map(prod => {\n        return {\n          name: prod.name\n        };\n      });\n      var productNames = [];\n      productNames = [{\n        name: user.user.basket.products[0].name\n      }, ...basketzz];\n    }\n\n    ;\n  }\n\n  async function putBasket(id) {\n    if (!productNames.map(prod => prod.name).includes(id)) {\n      productNames.push({\n        name: id\n      });\n    }\n\n    const response = await axios.put(\"http://localhost:8080/basket/\".concat(user.user.id), {\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      products: [...productNames]\n    });\n    setRefresh(!refresh);\n    return response;\n  }\n\n  ;\n\n  async function fetchUser() {\n    //add template string for username\n    const response = await axios.get(\"http://localhost:8080/users/bob\", {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    return response;\n  }\n\n  ;\n\n  async function fetchProducts() {\n    const response = await axios.get(\"http://localhost:8080/products\", {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    return response;\n  }\n\n  ;\n\n  const onInputChange = ({\n    target\n  }) => {\n    if (target.id === \"name\") {\n      setName(target.value);\n    } else if (target.id === \"userName\") {\n      setUserName(target.value);\n    } else if (target.id === \"password\") {\n      setPassword(target.value);\n    } else {\n      setPrice(target.value);\n    }\n  };\n\n  useEffect(() => {\n    fetchProducts().then(response => setProducts(response.data));\n    fetchUser().then(response => setUser({\n      user: response.data\n    }));\n  }, []);\n  useEffect(() => {\n    fetchProducts().then(response => setProducts(response.data));\n    fetchUser().then(response => setUser({\n      user: response.data\n    }));\n  }, [refresh]);\n  return React.createElement(\"div\", {\n    className: \"App container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, React.createElement(BrowserRouter, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, React.createElement(Route, {\n    path: \"/commerce\",\n    exact: true,\n    render: () => React.createElement(CommercePage, {\n      refresh: refresh,\n      setRefresh: setRefresh,\n      user: user,\n      products: products,\n      putBasket: putBasket,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/\",\n    exact: true,\n    render: () => React.createElement(LoginPage, {\n      user: user,\n      setUser: setUser,\n      onInputChange: onInputChange,\n      userName: userName,\n      password: password,\n      refresh: refresh,\n      setRefresh: setRefresh,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/basket\",\n    exact: true,\n    render: () => React.createElement(Basket, {\n      basketo: productNames,\n      user: user,\n      basket: basket,\n      setBasket: setBasket,\n      products: products,\n      refresh: refresh,\n      setRefresh: setRefresh,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/admin\",\n    exact: true,\n    render: () => React.createElement(AdminPage, {\n      name: name,\n      setName: setName,\n      price: price,\n      setPrice: setPrice,\n      refresh: refresh,\n      setRefresh: setRefresh,\n      products: products,\n      onInputChange: onInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/esther/client/src/App.js"],"names":["React","useState","useEffect","axios","BrowserRouter","Route","CommercePage","LoginPage","Basket","AdminPage","App","userName","setUserName","password","setPassword","name","setName","price","setPrice","user","setUser","basket","setBasket","refresh","setRefresh","products","setProducts","undefined","length","productNames","basketzz","baskets","slice","map","prod","putBasket","id","includes","push","response","put","headers","fetchUser","get","fetchProducts","onInputChange","target","value","then","data"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport axios from 'axios';\nimport {BrowserRouter, Route} from 'react-router-dom';\nimport CommercePage from './Components/CommercePage';\nimport LoginPage from './Components/LoginPage';\nimport Basket from './Components/Basket';\nimport AdminPage from './Components/AdminPage';\n\nimport './App.css';\n\nfunction App() {\n  const [userName, setUserName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [price, setPrice] = useState(\"\");\n  const [user, setUser] = useState();\n  const [basket, setBasket] = useState();\n  const [refresh, setRefresh] = useState(false);\n  const [products, setProducts] = useState([]);\n\n  \n  if (user != undefined) {\n    if (user.user.basket.products.length === 0) {\n      var productNames = [];\n  } else {\n      var basketzz = user.user.basket.products[0].baskets[0].products.slice(1).map(prod => {return {name: prod.name}});\n      var productNames = [];\n      productNames = [\n        {name: user.user.basket.products[0].name},\n        ...basketzz\n      ];\n    };\n  }\n    \n  async function putBasket(id) {\n    if (!productNames.map(prod => prod.name).includes(id)) {\n      productNames.push({name: id});\n    }\n      const response = await axios.put(`http://localhost:8080/basket/${user.user.id}`,\n        { \n            headers: {\n                'Content-Type': 'application/json',\n            },\n            products: [\n                ...productNames\n            ]\n        }\n    ) \n    \n    setRefresh(!refresh);\n    return response;      \n};\n\n  async function fetchUser() {\n\n    //add template string for username\n    const response = await axios.get(\"http://localhost:8080/users/bob\",\n        { \n            headers: {\n                'Content-Type': 'application/json'\n            }\n        }\n    );\n    return response;\n  };\n\n  async function fetchProducts() {\n      const response = await axios.get(\"http://localhost:8080/products\",\n          { \n              headers: {\n                  'Content-Type': 'application/json',\n              }\n          }\n      )\n      return response;\n  };\n\n  const onInputChange = ({target}) => {\n\n    if (target.id === \"name\") {\n        setName(target.value);\n    } else if (target.id === \"userName\") {\n        setUserName(target.value);\n    } else if (target.id === \"password\") {\n        setPassword(target.value);\n    }\n        else {\n        setPrice(target.value);\n    }\n}\n\n  useEffect(\n      () => {\n          fetchProducts().then((response) => setProducts(response.data));\n          fetchUser().then((response) => setUser({user: response.data}));\n      }\n      , []\n  )\n\nuseEffect(\n    () => {\n        fetchProducts().then((response) => setProducts(response.data));\n        fetchUser().then((response) => setUser({user: response.data}));\n    }\n    , [refresh]\n)\n\n  return (\n    <div className=\"App container\">\n      <BrowserRouter>\n        <Route path = \"/commerce\" exact render = {() => \n          <CommercePage \n            refresh = {refresh} setRefresh = {setRefresh}\n            user = {user} products = {products} putBasket = {putBasket}\n          />}\n        />\n        <Route path = \"/\" exact render = {() => \n          <LoginPage \n            user = {user} setUser = {setUser} onInputChange = {onInputChange}\n            userName = {userName} password = {password} refresh = {refresh} setRefresh = {setRefresh}\n          />} \n        />\n        <Route path = \"/basket\" exact render = {() => \n          <Basket \n            basketo = {productNames} user = {user} \n            basket = {basket} setBasket = {setBasket} \n            products = {products} refresh = {refresh} setRefresh = {setRefresh}\n          />}\n        />\n        <Route path = \"/admin\" exact render = {() => \n          <AdminPage \n            name = {name} setName = {setName} price = {price} setPrice = {setPrice} \n            refresh = {refresh} setRefresh = {setRefresh} products = {products} onInputChange = {onInputChange}\n          />}\n        />\n      </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}